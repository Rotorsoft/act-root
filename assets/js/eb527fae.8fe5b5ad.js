"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3727"],{667(e,n,r){r.r(n),r.d(n,{metadata:()=>a,default:()=>h,frontMatter:()=>s,contentTitle:()=>o,toc:()=>l,assets:()=>c});var a=JSON.parse('{"id":"api/act/src/functions/validate","title":"validate","description":"@rotorsoft/act-root","source":"@site/docs/api/act/src/functions/validate.md","sourceDirName":"api/act/src/functions","slug":"/api/act/src/functions/validate","permalink":"/act-root/docs/api/act/src/functions/validate","draft":false,"unlisted":false,"editUrl":"https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/functions/validate.md","tags":[],"version":"current","frontMatter":{}}'),t=r(6259),i=r(3230);let s={},o,c={},l=[{value:"Type Parameters",id:"type-parameters",level:2},{value:"S",id:"s",level:3},{value:"Parameters",id:"parameters",level:2},{value:"target",id:"target",level:3},{value:"payload",id:"payload",level:3},{value:"schema?",id:"schema",level:3},{value:"Returns",id:"returns",level:2},{value:"Throws",id:"throws",level:2},{value:"Examples",id:"examples",level:2},{value:"See",id:"see",level:2}];function d(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/act-root/docs/api/",children:(0,t.jsx)(n.strong,{children:"@rotorsoft/act-root"})})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/act-root/docs/api/",children:"@rotorsoft/act-root"})," / ",(0,t.jsx)(n.a,{href:"/act-root/docs/api/act/src/",children:"act/src"})," / validate"]}),"\n",(0,t.jsx)(n.h1,{id:"function-validate",children:"Function: validate()"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"validate"}),"<",(0,t.jsx)(n.code,{children:"S"}),">(",(0,t.jsx)(n.code,{children:"target"}),", ",(0,t.jsx)(n.code,{children:"payload"}),", ",(0,t.jsx)(n.code,{children:"schema?"}),"): ",(0,t.jsx)(n.code,{children:"Readonly"}),"<",(0,t.jsx)(n.code,{children:"S"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Defined in: ",(0,t.jsx)(n.a,{href:"https://github.com/Rotorsoft/act-root/blob/9e65c8771b1ee16c4ff1a6a96f386e7bd4ffead8/libs/act/src/utils.ts#L252",children:"libs/act/src/utils.ts:252"})]}),"\n",(0,t.jsx)(n.p,{children:"Validates a payload against a Zod schema."}),"\n",(0,t.jsxs)(n.p,{children:["This is the primary validation function used throughout the Act framework.\nIt parses the payload using the provided Zod schema and throws a\n",(0,t.jsx)(n.a,{href:"/act-root/docs/api/act/src/classes/ValidationError",children:"ValidationError"})," with detailed error information if validation fails."]}),"\n",(0,t.jsx)(n.p,{children:"When no schema is provided, the payload is returned as-is without validation.\nThis allows for optional validation in the framework."}),"\n",(0,t.jsx)(n.p,{children:"The framework automatically calls this function when:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Actions are invoked via ",(0,t.jsx)(n.code,{children:"app.do()"})]}),"\n",(0,t.jsx)(n.li,{children:"Events are emitted from action handlers"}),"\n",(0,t.jsx)(n.li,{children:"States are initialized"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,t.jsx)(n.h3,{id:"s",children:"S"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"S"})}),"\n",(0,t.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(n.h3,{id:"target",children:"target"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"string"})}),"\n",(0,t.jsx)(n.p,{children:"Name of the target being validated (used in error messages)"}),"\n",(0,t.jsx)(n.h3,{id:"payload",children:"payload"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Readonly"}),"<",(0,t.jsx)(n.code,{children:"S"}),">"]}),"\n",(0,t.jsx)(n.p,{children:"The data to validate"}),"\n",(0,t.jsx)(n.h3,{id:"schema",children:"schema?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ZodType"}),"<",(0,t.jsx)(n.code,{children:"S"}),", ",(0,t.jsx)(n.code,{children:"unknown"}),", ",(0,t.jsx)(n.code,{children:"$ZodTypeInternals"}),"<",(0,t.jsx)(n.code,{children:"S"}),", ",(0,t.jsx)(n.code,{children:"unknown"}),">>"]}),"\n",(0,t.jsx)(n.p,{children:"Optional Zod schema to validate against"}),"\n",(0,t.jsx)(n.h2,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Readonly"}),"<",(0,t.jsx)(n.code,{children:"S"}),">"]}),"\n",(0,t.jsx)(n.p,{children:"The validated and type-safe payload"}),"\n",(0,t.jsx)(n.h2,{id:"throws",children:"Throws"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/act-root/docs/api/act/src/classes/ValidationError",children:"ValidationError"})," if validation fails with detailed error info"]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { validate } from "@rotorsoft/act";\nimport { z } from "zod";\n\nconst UserSchema = z.object({\n  email: z.string().email(),\n  age: z.number().min(0)\n});\n\nconst user = validate("User", { email: "alice@example.com", age: 30 }, UserSchema);\n// Returns: { email: "alice@example.com", age: 30 }\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { validate, ValidationError } from "@rotorsoft/act";\nimport { z } from "zod";\n\nconst schema = z.object({\n  email: z.string().email(),\n  age: z.number().min(18)\n});\n\ntry {\n  validate("User", { email: "invalid", age: 15 }, schema);\n} catch (error) {\n  if (error instanceof ValidationError) {\n    console.error("Target:", error.target);  // "User"\n    console.error("Payload:", error.payload);  // { email: "invalid", age: 15 }\n    console.error("Details:", error.details);  // Prettified Zod errors\n    // Details shows: email must be valid, age must be >= 18\n  }\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// When schema is undefined, payload is returned as-is\nconst data = validate("Data", { any: "value" });\n// Returns: { any: "value" } without validation\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { state } from "@rotorsoft/act";\nimport { z } from "zod";\n\nconst Counter = state("Counter", z.object({ count: z.number() }))\n  .init(() => ({ count: 0 }))\n  .emits({ Incremented: z.object({ by: z.number().positive() }) })\n  .on({ increment: z.object({ by: z.number() }) })\n    .emit((action) => {\n      // validate() is called automatically before this runs\n      // action.by is guaranteed to be a number\n      return ["Incremented", { by: action.by }];\n    })\n  .build();\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { validate } from "@rotorsoft/act";\nimport { z } from "zod";\n\nconst ConfigSchema = z.object({\n  apiKey: z.string().min(32),\n  timeout: z.number().positive(),\n  retries: z.number().int().min(0).max(10)\n});\n\nfunction loadConfig(raw: unknown) {\n  return validate("AppConfig", raw, ConfigSchema);\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"see",children:"See"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/act-root/docs/api/act/src/classes/ValidationError",children:"ValidationError"})," for error handling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://zod.dev",children:"Zod documentation"})," for schema definition"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},3230(e,n,r){r.d(n,{R:()=>s,x:()=>o});var a=r(1299);let t={},i=a.createContext(t);function s(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);