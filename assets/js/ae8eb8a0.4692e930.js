"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3398"],{9321(e,r,n){n.r(r),n.d(r,{metadata:()=>s,default:()=>h,frontMatter:()=>i,contentTitle:()=>d,toc:()=>o,assets:()=>a});var s=JSON.parse('{"id":"api/act/src/classes/InvariantError","title":"InvariantError","description":"@rotorsoft/act-root","source":"@site/docs/api/act/src/classes/InvariantError.md","sourceDirName":"api/act/src/classes","slug":"/api/act/src/classes/InvariantError","permalink":"/act-root/docs/api/act/src/classes/InvariantError","draft":false,"unlisted":false,"editUrl":"https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/classes/InvariantError.md","tags":[],"version":"current","frontMatter":{}}'),t=n(6259),c=n(3230);let i={},d,a={},o=[{value:"Examples",id:"examples",level:2},{value:"See",id:"see",level:2},{value:"Extends",id:"extends",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"TState",id:"tstate",level:3},{value:"TEvents",id:"tevents",level:3},{value:"TActions",id:"tactions",level:3},{value:"TKey",id:"tkey",level:3},{value:"TActor",id:"tactor",level:3},{value:"Constructors",id:"constructors",level:2},{value:"Constructor",id:"constructor",level:3},{value:"Parameters",id:"parameters",level:4},{value:"action",id:"action",level:5},{value:"payload",id:"payload",level:5},{value:"target",id:"target",level:5},{value:"snapshot",id:"snapshot",level:5},{value:"description",id:"description",level:5},{value:"Returns",id:"returns",level:4},{value:"Overrides",id:"overrides",level:4},{value:"Properties",id:"properties",level:2},{value:"action",id:"action-1",level:3},{value:"cause?",id:"cause",level:3},{value:"Inherited from",id:"inherited-from",level:4},{value:"description",id:"description-1",level:3},{value:"message",id:"message",level:3},{value:"Inherited from",id:"inherited-from-1",level:4},{value:"name",id:"name",level:3},{value:"Inherited from",id:"inherited-from-2",level:4},{value:"payload",id:"payload-1",level:3},{value:"snapshot",id:"snapshot-1",level:3},{value:"stack?",id:"stack",level:3},{value:"Inherited from",id:"inherited-from-3",level:4},{value:"target",id:"target-1",level:3},{value:"stackTraceLimit",id:"stacktracelimit",level:3},{value:"Inherited from",id:"inherited-from-4",level:4},{value:"Methods",id:"methods",level:2},{value:"captureStackTrace()",id:"capturestacktrace",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"targetObject",id:"targetobject",level:5},{value:"constructorOpt?",id:"constructoropt",level:5},{value:"Returns",id:"returns-1",level:4},{value:"Inherited from",id:"inherited-from-5",level:4},{value:"prepareStackTrace()",id:"preparestacktrace",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"err",id:"err",level:5},{value:"stackTraces",id:"stacktraces",level:5},{value:"Returns",id:"returns-2",level:4},{value:"See",id:"see-1",level:4},{value:"Inherited from",id:"inherited-from-6",level:4}];function l(e){let r={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"/act-root/docs/api/",children:(0,t.jsx)(r.strong,{children:"@rotorsoft/act-root"})})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"/act-root/docs/api/",children:"@rotorsoft/act-root"})," / ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/",children:"act/src"})," / InvariantError"]}),"\n",(0,t.jsx)(r.h1,{id:"class-invarianterrortstate-tevents-tactions-tkey-tactor",children:"Class: InvariantError<TState, TEvents, TActions, TKey, TActor>"}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L150",children:"libs/act/src/types/errors.ts:150"})]}),"\n",(0,t.jsx)(r.p,{children:"Thrown when a business rule (invariant) is violated during action execution."}),"\n",(0,t.jsx)(r.p,{children:"Invariants are conditions that must hold true for an action to succeed.\nThey're checked after loading the current state but before emitting events.\nThis error provides complete context about what action was attempted and\nwhy it was rejected."}),"\n",(0,t.jsx)(r.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:'import { InvariantError } from "@rotorsoft/act";\n\ntry {\n  await app.do("withdraw",\n    { stream: "account-123", actor: { id: "user1", name: "Alice" } },\n    { amount: 1000 }\n  );\n} catch (error) {\n  if (error instanceof InvariantError) {\n    console.error("Action:", error.action);\n    console.error("Reason:", error.description);\n    console.error("Current state:", error.snapshot.state);\n    console.error("Attempted payload:", error.payload);\n  }\n}\n'})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:'try {\n  await app.do("closeTicket", target, payload);\n} catch (error) {\n  if (error instanceof InvariantError) {\n    // Present friendly message to user\n    if (error.description === "Ticket must be open") {\n      return { error: "This ticket is already closed" };\n    } else if (error.description === "Not authorized") {\n      return { error: "You don\'t have permission to close this ticket" };\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:'try {\n  await app.do("transfer", target, { to: "account2", amount: 500 });\n} catch (error) {\n  if (error instanceof InvariantError) {\n    logger.error({\n      action: error.action,\n      stream: error.target.stream,\n      actor: error.target.actor,\n      reason: error.description,\n      balance: error.snapshot.state.balance,\n      attempted: error.payload.amount\n    }, "Invariant violation");\n  }\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"see",children:"See"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Invariant",children:"Invariant"})," for defining business rules"]}),"\n",(0,t.jsx)(r.h2,{id:"extends",children:"Extends"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.code,{children:"Error"})}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,t.jsx)(r.h3,{id:"tstate",children:"TState"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"TState"})," ",(0,t.jsx)(r.em,{children:"extends"})," ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Schema",children:(0,t.jsx)(r.code,{children:"Schema"})})]}),"\n",(0,t.jsx)(r.p,{children:"State schema type"}),"\n",(0,t.jsx)(r.h3,{id:"tevents",children:"TEvents"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"TEvents"})," ",(0,t.jsx)(r.em,{children:"extends"})," ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Schemas",children:(0,t.jsx)(r.code,{children:"Schemas"})})]}),"\n",(0,t.jsx)(r.p,{children:"Event schemas type"}),"\n",(0,t.jsx)(r.h3,{id:"tactions",children:"TActions"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"TActions"})," ",(0,t.jsx)(r.em,{children:"extends"})," ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Schemas",children:(0,t.jsx)(r.code,{children:"Schemas"})})]}),"\n",(0,t.jsx)(r.p,{children:"Action schemas type"}),"\n",(0,t.jsx)(r.h3,{id:"tkey",children:"TKey"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"TKey"})," ",(0,t.jsx)(r.em,{children:"extends"})," keyof ",(0,t.jsx)(r.code,{children:"TActions"})]}),"\n",(0,t.jsx)(r.p,{children:"Action name"}),"\n",(0,t.jsx)(r.h3,{id:"tactor",children:"TActor"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"TActor"})," ",(0,t.jsx)(r.em,{children:"extends"})," ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Actor",children:(0,t.jsx)(r.code,{children:"Actor"})})," = ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Actor",children:(0,t.jsx)(r.code,{children:"Actor"})})]}),"\n",(0,t.jsx)(r.p,{children:"Actor type extending base Actor"}),"\n",(0,t.jsx)(r.h2,{id:"constructors",children:"Constructors"}),"\n",(0,t.jsx)(r.h3,{id:"constructor",children:"Constructor"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"new InvariantError"}),"<",(0,t.jsx)(r.code,{children:"TState"}),", ",(0,t.jsx)(r.code,{children:"TEvents"}),", ",(0,t.jsx)(r.code,{children:"TActions"}),", ",(0,t.jsx)(r.code,{children:"TKey"}),", ",(0,t.jsx)(r.code,{children:"TActor"}),">(",(0,t.jsx)(r.code,{children:"action"}),", ",(0,t.jsx)(r.code,{children:"payload"}),", ",(0,t.jsx)(r.code,{children:"target"}),", ",(0,t.jsx)(r.code,{children:"snapshot"}),", ",(0,t.jsx)(r.code,{children:"description"}),"): ",(0,t.jsx)(r.code,{children:"InvariantError"}),"<",(0,t.jsx)(r.code,{children:"TState"}),", ",(0,t.jsx)(r.code,{children:"TEvents"}),", ",(0,t.jsx)(r.code,{children:"TActions"}),", ",(0,t.jsx)(r.code,{children:"TKey"}),", ",(0,t.jsx)(r.code,{children:"TActor"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L157",children:"libs/act/src/types/errors.ts:157"})]}),"\n",(0,t.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(r.h5,{id:"action",children:"action"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"TKey"})}),"\n",(0,t.jsx)(r.p,{children:"The action that was attempted"}),"\n",(0,t.jsx)(r.h5,{id:"payload",children:"payload"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"Readonly"}),"<",(0,t.jsx)(r.code,{children:"TActions"}),"[",(0,t.jsx)(r.code,{children:"TKey"}),"]>"]}),"\n",(0,t.jsx)(r.p,{children:"The action payload that was provided"}),"\n",(0,t.jsx)(r.h5,{id:"target",children:"target"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Target",children:(0,t.jsx)(r.code,{children:"Target"})}),"<",(0,t.jsx)(r.code,{children:"TActor"}),">"]}),"\n",(0,t.jsx)(r.p,{children:"The target stream and actor context"}),"\n",(0,t.jsx)(r.h5,{id:"snapshot",children:"snapshot"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Snapshot",children:(0,t.jsx)(r.code,{children:"Snapshot"})}),"<",(0,t.jsx)(r.code,{children:"TState"}),", ",(0,t.jsx)(r.code,{children:"TEvents"}),">"]}),"\n",(0,t.jsx)(r.p,{children:"The current state snapshot when invariant was checked"}),"\n",(0,t.jsx)(r.h5,{id:"description",children:"description"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"string"})}),"\n",(0,t.jsx)(r.p,{children:"Human-readable description of why the invariant failed"}),"\n",(0,t.jsx)(r.h4,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"InvariantError"}),"<",(0,t.jsx)(r.code,{children:"TState"}),", ",(0,t.jsx)(r.code,{children:"TEvents"}),", ",(0,t.jsx)(r.code,{children:"TActions"}),", ",(0,t.jsx)(r.code,{children:"TKey"}),", ",(0,t.jsx)(r.code,{children:"TActor"}),">"]}),"\n",(0,t.jsx)(r.h4,{id:"overrides",children:"Overrides"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.constructor"})}),"\n",(0,t.jsx)(r.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(r.h3,{id:"action-1",children:"action"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"readonly"})," ",(0,t.jsx)(r.strong,{children:"action"}),": ",(0,t.jsx)(r.code,{children:"TKey"})]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L159",children:"libs/act/src/types/errors.ts:159"})]}),"\n",(0,t.jsx)(r.p,{children:"The action that was attempted"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"cause",children:"cause?"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"optional"})," ",(0,t.jsx)(r.strong,{children:"cause"}),": ",(0,t.jsx)(r.code,{children:"unknown"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.error.d.ts:26"}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.cause"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"description-1",children:"description"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"readonly"})," ",(0,t.jsx)(r.strong,{children:"description"}),": ",(0,t.jsx)(r.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L167",children:"libs/act/src/types/errors.ts:167"})]}),"\n",(0,t.jsx)(r.p,{children:"Human-readable description of why the invariant failed"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"message",children:"message"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"message"}),": ",(0,t.jsx)(r.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es5.d.ts:1077"}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-1",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.message"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"name",children:"name"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"name"}),": ",(0,t.jsx)(r.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es5.d.ts:1076"}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-2",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.name"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"payload-1",children:"payload"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"readonly"})," ",(0,t.jsx)(r.strong,{children:"payload"}),": ",(0,t.jsx)(r.code,{children:"Readonly"}),"<",(0,t.jsx)(r.code,{children:"TActions"}),"[",(0,t.jsx)(r.code,{children:"TKey"}),"]>"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L161",children:"libs/act/src/types/errors.ts:161"})]}),"\n",(0,t.jsx)(r.p,{children:"The action payload that was provided"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"snapshot-1",children:"snapshot"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"readonly"})," ",(0,t.jsx)(r.strong,{children:"snapshot"}),": ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Snapshot",children:(0,t.jsx)(r.code,{children:"Snapshot"})}),"<",(0,t.jsx)(r.code,{children:"TState"}),", ",(0,t.jsx)(r.code,{children:"TEvents"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L165",children:"libs/act/src/types/errors.ts:165"})]}),"\n",(0,t.jsx)(r.p,{children:"The current state snapshot when invariant was checked"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"stack",children:"stack?"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"optional"})," ",(0,t.jsx)(r.strong,{children:"stack"}),": ",(0,t.jsx)(r.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es5.d.ts:1078"}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-3",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.stack"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"target-1",children:"target"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"readonly"})," ",(0,t.jsx)(r.strong,{children:"target"}),": ",(0,t.jsx)(r.a,{href:"/act-root/docs/api/act/src/type-aliases/Target",children:(0,t.jsx)(r.code,{children:"Target"})}),"<",(0,t.jsx)(r.code,{children:"TActor"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Defined in: ",(0,t.jsx)(r.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/errors.ts#L163",children:"libs/act/src/types/errors.ts:163"})]}),"\n",(0,t.jsx)(r.p,{children:"The target stream and actor context"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"stacktracelimit",children:"stackTraceLimit"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"static"})," ",(0,t.jsx)(r.strong,{children:"stackTraceLimit"}),": ",(0,t.jsx)(r.code,{children:"number"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/@types+node@25.3.0/node_modules/@types/node/globals.d.ts:67"}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"Error.stackTraceLimit"})," property specifies the number of stack frames\ncollected by a stack trace (whether generated by ",(0,t.jsx)(r.code,{children:"new Error().stack"})," or\n",(0,t.jsx)(r.code,{children:"Error.captureStackTrace(obj)"}),")."]}),"\n",(0,t.jsxs)(r.p,{children:["The default value is ",(0,t.jsx)(r.code,{children:"10"})," but may be set to any valid JavaScript number. Changes\nwill affect any stack trace captured ",(0,t.jsx)(r.em,{children:"after"})," the value has been changed."]}),"\n",(0,t.jsx)(r.p,{children:"If set to a non-number value, or set to a negative number, stack traces will\nnot capture any frames."}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-4",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.stackTraceLimit"})}),"\n",(0,t.jsx)(r.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(r.h3,{id:"capturestacktrace",children:"captureStackTrace()"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"static"})," ",(0,t.jsx)(r.strong,{children:"captureStackTrace"}),"(",(0,t.jsx)(r.code,{children:"targetObject"}),", ",(0,t.jsx)(r.code,{children:"constructorOpt?"}),"): ",(0,t.jsx)(r.code,{children:"void"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/@types+node@25.3.0/node_modules/@types/node/globals.d.ts:51"}),"\n",(0,t.jsxs)(r.p,{children:["Creates a ",(0,t.jsx)(r.code,{children:".stack"})," property on ",(0,t.jsx)(r.code,{children:"targetObject"}),", which when accessed returns\na string representing the location in the code at which\n",(0,t.jsx)(r.code,{children:"Error.captureStackTrace()"})," was called."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"const myObject = {};\nError.captureStackTrace(myObject);\nmyObject.stack;  // Similar to `new Error().stack`\n"})}),"\n",(0,t.jsxs)(r.p,{children:["The first line of the trace will be prefixed with\n",(0,t.jsx)(r.code,{children:"${myObject.name}: ${myObject.message}"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["The optional ",(0,t.jsx)(r.code,{children:"constructorOpt"})," argument accepts a function. If given, all frames\nabove ",(0,t.jsx)(r.code,{children:"constructorOpt"}),", including ",(0,t.jsx)(r.code,{children:"constructorOpt"}),", will be omitted from the\ngenerated stack trace."]}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"constructorOpt"})," argument is useful for hiding implementation\ndetails of error generation from the user. For instance:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"function a() {\n  b();\n}\n\nfunction b() {\n  c();\n}\n\nfunction c() {\n  // Create an error without stack trace to avoid calculating the stack trace twice.\n  const { stackTraceLimit } = Error;\n  Error.stackTraceLimit = 0;\n  const error = new Error();\n  Error.stackTraceLimit = stackTraceLimit;\n\n  // Capture the stack trace above function b\n  Error.captureStackTrace(error, b); // Neither function c, nor b is included in the stack trace\n  throw error;\n}\n\na();\n"})}),"\n",(0,t.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsx)(r.h5,{id:"targetobject",children:"targetObject"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"object"})}),"\n",(0,t.jsx)(r.h5,{id:"constructoropt",children:"constructorOpt?"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Function"})}),"\n",(0,t.jsx)(r.h4,{id:"returns-1",children:"Returns"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"void"})}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-5",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.captureStackTrace"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"preparestacktrace",children:"prepareStackTrace()"}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"static"})," ",(0,t.jsx)(r.strong,{children:"prepareStackTrace"}),"(",(0,t.jsx)(r.code,{children:"err"}),", ",(0,t.jsx)(r.code,{children:"stackTraces"}),"): ",(0,t.jsx)(r.code,{children:"any"})]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"Defined in: node_modules/.pnpm/@types+node@25.3.0/node_modules/@types/node/globals.d.ts:55"}),"\n",(0,t.jsx)(r.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsx)(r.h5,{id:"err",children:"err"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error"})}),"\n",(0,t.jsx)(r.h5,{id:"stacktraces",children:"stackTraces"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"CallSite"}),"[]"]}),"\n",(0,t.jsx)(r.h4,{id:"returns-2",children:"Returns"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"any"})}),"\n",(0,t.jsx)(r.h4,{id:"see-1",children:"See"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://v8.dev/docs/stack-trace-api#customizing-stack-traces",children:"https://v8.dev/docs/stack-trace-api#customizing-stack-traces"})}),"\n",(0,t.jsx)(r.h4,{id:"inherited-from-6",children:"Inherited from"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Error.prepareStackTrace"})})]})}function h(e={}){let{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},3230(e,r,n){n.d(r,{R:()=>i,x:()=>d});var s=n(1299);let t={},c=s.createContext(t);function i(e){let r=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(c.Provider,{value:r},e.children)}}}]);