"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["6415"],{6015(e,t,s){s.r(t),s.d(t,{metadata:()=>n,default:()=>d,frontMatter:()=>o,contentTitle:()=>r,toc:()=>l,assets:()=>i});var n=JSON.parse('{"id":"api/act/src/type-aliases/Snapshot","title":"Snapshot","description":"@rotorsoft/act-root","source":"@site/docs/api/act/src/type-aliases/Snapshot.md","sourceDirName":"api/act/src/type-aliases","slug":"/api/act/src/type-aliases/Snapshot","permalink":"/act-root/docs/api/act/src/type-aliases/Snapshot","draft":false,"unlisted":false,"editUrl":"https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/type-aliases/Snapshot.md","tags":[],"version":"current","frontMatter":{}}'),c=s(6259),a=s(3230);let o={},r,i={},l=[{value:"Examples",id:"examples",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"TState",id:"tstate",level:3},{value:"TEvents",id:"tevents",level:3},{value:"Properties",id:"properties",level:2},{value:"event?",id:"event",level:3},{value:"patches",id:"patches",level:3},{value:"snaps",id:"snaps",level:3},{value:"state",id:"state",level:3}];function h(e){let t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.p,{children:(0,c.jsx)(t.a,{href:"/act-root/docs/api/",children:(0,c.jsx)(t.strong,{children:"@rotorsoft/act-root"})})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.a,{href:"/act-root/docs/api/",children:"@rotorsoft/act-root"})," / ",(0,c.jsx)(t.a,{href:"/act-root/docs/api/act/src/",children:"act/src"})," / Snapshot"]}),"\n",(0,c.jsx)(t.h1,{id:"type-alias-snapshottstate-tevents",children:"Type Alias: Snapshot<TState, TEvents>"}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:"Snapshot"}),"<",(0,c.jsx)(t.code,{children:"TState"}),", ",(0,c.jsx)(t.code,{children:"TEvents"}),"> = ",(0,c.jsx)(t.code,{children:"object"})]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Defined in: ",(0,c.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/action.ts#L228",children:"libs/act/src/types/action.ts:228"})]}),"\n",(0,c.jsx)(t.p,{children:"Snapshot of state at a specific point in time."}),"\n",(0,c.jsx)(t.p,{children:"Snapshots represent the current state after applying events. They include\nmetadata about how many events have been applied (patches) and how many\nsnapshots have been taken for optimization."}),"\n",(0,c.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-typescript",children:'const snapshot = await app.load(Counter, "counter-1");\n\nconsole.log(snapshot.state);     // { count: 42 }\nconsole.log(snapshot.patches);   // 8 (events since last snapshot)\nconsole.log(snapshot.snaps);     // 1 (1 snapshot taken)\nconsole.log(snapshot.event);     // Last event that created this snapshot\n'})}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-typescript",children:'.on({ increment: z.object({ by: z.number() }) })\n  .emit((action, snapshot) => {\n    console.log("Current count:", snapshot.state.count);\n    console.log("Events applied:", snapshot.patches);\n    return ["Incremented", { amount: action.by }];\n  })\n'})}),"\n",(0,c.jsx)(t.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,c.jsx)(t.h3,{id:"tstate",children:"TState"}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"TState"})," ",(0,c.jsx)(t.em,{children:"extends"})," ",(0,c.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/Schema",children:(0,c.jsx)(t.code,{children:"Schema"})})]}),"\n",(0,c.jsx)(t.p,{children:"State schema"}),"\n",(0,c.jsx)(t.h3,{id:"tevents",children:"TEvents"}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"TEvents"})," ",(0,c.jsx)(t.em,{children:"extends"})," ",(0,c.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/Schemas",children:(0,c.jsx)(t.code,{children:"Schemas"})})]}),"\n",(0,c.jsx)(t.p,{children:"Event schemas"}),"\n",(0,c.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,c.jsx)(t.h3,{id:"event",children:"event?"}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"readonly"})," ",(0,c.jsx)(t.code,{children:"optional"})," ",(0,c.jsx)(t.strong,{children:"event"}),": ",(0,c.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/Committed",children:(0,c.jsx)(t.code,{children:"Committed"})}),"<",(0,c.jsx)(t.code,{children:"TEvents"}),", keyof ",(0,c.jsx)(t.code,{children:"TEvents"}),">"]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Defined in: ",(0,c.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/action.ts#L232",children:"libs/act/src/types/action.ts:232"})]}),"\n",(0,c.jsx)(t.p,{children:"Event that created this snapshot (undefined for initial state)"}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h3,{id:"patches",children:"patches"}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"readonly"})," ",(0,c.jsx)(t.strong,{children:"patches"}),": ",(0,c.jsx)(t.code,{children:"number"})]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Defined in: ",(0,c.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/action.ts#L234",children:"libs/act/src/types/action.ts:234"})]}),"\n",(0,c.jsx)(t.p,{children:"Number of patches applied since last snapshot"}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h3,{id:"snaps",children:"snaps"}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"readonly"})," ",(0,c.jsx)(t.strong,{children:"snaps"}),": ",(0,c.jsx)(t.code,{children:"number"})]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Defined in: ",(0,c.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/action.ts#L236",children:"libs/act/src/types/action.ts:236"})]}),"\n",(0,c.jsx)(t.p,{children:"Number of snapshots taken for this stream"}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h3,{id:"state",children:"state"}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"readonly"})," ",(0,c.jsx)(t.strong,{children:"state"}),": ",(0,c.jsx)(t.code,{children:"TState"})]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Defined in: ",(0,c.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/types/action.ts#L230",children:"libs/act/src/types/action.ts:230"})]}),"\n",(0,c.jsx)(t.p,{children:"Current state data"})]})}function d(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},3230(e,t,s){s.d(t,{R:()=>o,x:()=>r});var n=s(1299);let c={},a=n.createContext(c);function o(e){let t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);