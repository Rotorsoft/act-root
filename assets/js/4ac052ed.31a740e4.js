"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["4478"],{5207(e,s,n){n.r(s),n.d(s,{metadata:()=>r,default:()=>p,frontMatter:()=>t,contentTitle:()=>i,toc:()=>d,assets:()=>a});var r=JSON.parse('{"id":"api/act/src/functions/dispose","title":"dispose","description":"@rotorsoft/act-root","source":"@site/docs/api/act/src/functions/dispose.md","sourceDirName":"api/act/src/functions","slug":"/api/act/src/functions/dispose","permalink":"/act-root/docs/api/act/src/functions/dispose","draft":false,"unlisted":false,"editUrl":"https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/functions/dispose.md","tags":[],"version":"current","frontMatter":{}}'),o=n(7900),c=n(6416);let t={},i,a={},d=[{value:"Parameters",id:"parameters",level:2},{value:"disposer?",id:"disposer",level:3},{value:"Returns",id:"returns",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"code?",id:"code",level:4},{value:"Returns",id:"returns-1",level:3},{value:"Examples",id:"examples",level:2},{value:"See",id:"see",level:2}];function l(e){let s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"/act-root/docs/api/",children:(0,o.jsx)(s.strong,{children:"@rotorsoft/act-root"})})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"/act-root/docs/api/",children:"@rotorsoft/act-root"})," / ",(0,o.jsx)(s.a,{href:"/act-root/docs/api/act/src/",children:"act/src"})," / dispose"]}),"\n",(0,o.jsx)(s.h1,{id:"function-dispose",children:"Function: dispose()"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"dispose"}),"(",(0,o.jsx)(s.code,{children:"disposer?"}),"): (",(0,o.jsx)(s.code,{children:"code?"}),") => ",(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Defined in: ",(0,o.jsx)(s.a,{href:"https://github.com/Rotorsoft/act-root/blob/ee54d912cdcfc1e9ef7df1a3bdbd51e6c60346b4/libs/act/src/ports.ts#L177",children:"libs/act/src/ports.ts:177"})]}),"\n",(0,o.jsx)(s.p,{children:"Registers resource cleanup functions for graceful shutdown."}),"\n",(0,o.jsx)(s.p,{children:"Disposers are called automatically when the process exits (SIGINT, SIGTERM)\nor when manually triggered. They execute in reverse registration order,\nallowing proper cleanup of dependent resources."}),"\n",(0,o.jsx)(s.p,{children:"Act automatically disposes registered stores and adapters. Use this function\nto register additional cleanup for your own resources (database connections,\nfile handles, timers, etc.)."}),"\n",(0,o.jsx)(s.h2,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsx)(s.h3,{id:"disposer",children:"disposer?"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"/act-root/docs/api/act/src/type-aliases/Disposer",children:(0,o.jsx)(s.code,{children:"Disposer"})})}),"\n",(0,o.jsx)(s.p,{children:"Async function to call during cleanup"}),"\n",(0,o.jsx)(s.h2,{id:"returns",children:"Returns"}),"\n",(0,o.jsx)(s.p,{children:"Function to manually trigger disposal and exit"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:["(",(0,o.jsx)(s.code,{children:"code?"}),"): ",(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,o.jsx)(s.h4,{id:"code",children:"code?"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:'"ERROR"'})," | ",(0,o.jsx)(s.code,{children:'"EXIT"'})]}),"\n",(0,o.jsx)(s.h3,{id:"returns-1",children:"Returns"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"void"}),">"]}),"\n",(0,o.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:'import { dispose } from "@rotorsoft/act";\n\nconst redis = createRedisClient();\n\ndispose(async () => {\n  console.log("Closing Redis connection...");\n  await redis.quit();\n});\n\n// On SIGINT/SIGTERM, Redis will be cleaned up automatically\n'})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:'import { dispose } from "@rotorsoft/act";\n\nconst db = connectDatabase();\ndispose(async () => {\n  console.log("Closing database...");\n  await db.close();\n});\n\nconst cache = connectCache();\ndispose(async () => {\n  console.log("Closing cache...");\n  await cache.disconnect();\n});\n\n// On exit: cache closes first, then database\n'})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:'import { dispose } from "@rotorsoft/act";\n\nconst shutdown = dispose(async () => {\n  await cleanup();\n});\n\n// Manually trigger cleanup and exit\nprocess.on("SIGUSR2", async () => {\n  console.log("Manual shutdown requested");\n  await shutdown("EXIT");\n});\n'})}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-typescript",children:'import { dispose } from "@rotorsoft/act";\n\ndispose(async () => {\n  try {\n    await expensiveCleanup();\n  } catch (error) {\n    console.error("Cleanup failed:", error);\n    // Error doesn\'t prevent other disposers from running\n  }\n});\n'})}),"\n",(0,o.jsx)(s.h2,{id:"see",children:"See"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/act-root/docs/api/act/src/type-aliases/Disposer",children:"Disposer"})," for disposer function type"]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/act-root/docs/api/act/src/type-aliases/Disposable",children:"Disposable"})," for disposable interface"]}),"\n"]})]})}function p(e={}){let{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},6416(e,s,n){n.d(s,{R:()=>t,x:()=>i});var r=n(2128);let o={},c=r.createContext(o);function t(e){let s=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(c.Provider,{value:s},e.children)}}}]);