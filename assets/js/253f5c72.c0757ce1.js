"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["1641"],{4223(e,t,s){s.r(t),s.d(t,{metadata:()=>n,default:()=>h,frontMatter:()=>a,contentTitle:()=>c,toc:()=>d,assets:()=>l});var n=JSON.parse('{"id":"api/act/src/type-aliases/StateBuilder","title":"StateBuilder","description":"@rotorsoft/act-root","source":"@site/docs/api/act/src/type-aliases/StateBuilder.md","sourceDirName":"api/act/src/type-aliases","slug":"/api/act/src/type-aliases/StateBuilder","permalink":"/act-root/docs/api/act/src/type-aliases/StateBuilder","draft":false,"unlisted":false,"editUrl":"https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/type-aliases/StateBuilder.md","tags":[],"version":"current","frontMatter":{}}'),r=s(6259),i=s(3230);let a={},c,l={},d=[{value:"See",id:"see",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"TState",id:"tstate",level:3},{value:"TName",id:"tname",level:3},{value:"Properties",id:"properties",level:2},{value:"init()",id:"init",level:3},{value:"Parameters",id:"parameters",level:4},{value:"init",id:"init-1",level:5},{value:"Returns",id:"returns",level:4},{value:"emits()",id:"emits",level:5},{value:"Type Parameters",id:"type-parameters-1",level:6},{value:"TEvents",id:"tevents",level:6},{value:"Parameters",id:"parameters-1",level:6},{value:"events",id:"events",level:6},{value:"Returns",id:"returns-1",level:6},{value:"Example",id:"example",level:6},{value:"Examples",id:"examples",level:4}];function o(e){let t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"/act-root/docs/api/",children:(0,r.jsx)(t.strong,{children:"@rotorsoft/act-root"})})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"/act-root/docs/api/",children:"@rotorsoft/act-root"})," / ",(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/",children:"act/src"})," / StateBuilder"]}),"\n",(0,r.jsx)(t.h1,{id:"type-alias-statebuildertstate-tname",children:"Type Alias: StateBuilder<TState, TName>"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"StateBuilder"}),"<",(0,r.jsx)(t.code,{children:"TState"}),", ",(0,r.jsx)(t.code,{children:"TName"}),"> = ",(0,r.jsx)(t.code,{children:"object"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Defined in: ",(0,r.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/state-builder.ts#L33",children:"libs/act/src/state-builder.ts:33"})]}),"\n",(0,r.jsx)(t.p,{children:"Builder interface for defining a state with event sourcing."}),"\n",(0,r.jsx)(t.p,{children:"Provides a fluent API to configure the initial state, event types,\nand event handlers (reducers) before moving to action configuration."}),"\n",(0,r.jsx)(t.h2,{id:"see",children:"See"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/functions/state",children:"state"})," for usage examples"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/ActionBuilder",children:"ActionBuilder"})," for action configuration"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,r.jsx)(t.h3,{id:"tstate",children:"TState"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"TState"})," ",(0,r.jsx)(t.em,{children:"extends"})," ",(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/Schema",children:(0,r.jsx)(t.code,{children:"Schema"})})]}),"\n",(0,r.jsx)(t.p,{children:"State schema type"}),"\n",(0,r.jsx)(t.h3,{id:"tname",children:"TName"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"TName"})," ",(0,r.jsx)(t.em,{children:"extends"})," ",(0,r.jsx)(t.code,{children:"string"})," = ",(0,r.jsx)(t.code,{children:"string"})]}),"\n",(0,r.jsx)(t.p,{children:"State name literal type"}),"\n",(0,r.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(t.h3,{id:"init",children:"init()"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"init"}),": (",(0,r.jsx)(t.code,{children:"init"}),") => ",(0,r.jsx)(t.code,{children:"object"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Defined in: ",(0,r.jsx)(t.a,{href:"https://github.com/Rotorsoft/act-root/blob/68937848be0cb6872755bf1344224ec10c394a1c/libs/act/src/state-builder.ts#L56",children:"libs/act/src/state-builder.ts:56"})]}),"\n",(0,r.jsx)(t.p,{children:"Defines the initial state for new state instances."}),"\n",(0,r.jsx)(t.p,{children:"The init function is called when a new stream is created (first event).\nIt can accept initial data or return a default state."}),"\n",(0,r.jsx)(t.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(t.h5,{id:"init-1",children:"init"}),"\n",(0,r.jsxs)(t.p,{children:["() => ",(0,r.jsx)(t.code,{children:"Readonly"}),"<",(0,r.jsx)(t.code,{children:"TState"}),">"]}),"\n",(0,r.jsx)(t.p,{children:"Function returning the initial state"}),"\n",(0,r.jsx)(t.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:["A builder with ",(0,r.jsx)(t.code,{children:".emits()"})," to declare event types"]}),"\n",(0,r.jsx)(t.h5,{id:"emits",children:"emits()"}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"emits"}),": <",(0,r.jsx)(t.code,{children:"TEvents"}),">(",(0,r.jsx)(t.code,{children:"events"}),") => ",(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/ActionBuilder",children:(0,r.jsx)(t.code,{children:"ActionBuilder"})}),"<",(0,r.jsx)(t.code,{children:"TState"}),", ",(0,r.jsx)(t.code,{children:"TEvents"}),", { }, ",(0,r.jsx)(t.code,{children:"TName"}),"> & ",(0,r.jsx)(t.code,{children:"object"})]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Declares the event types that this state can emit."}),"\n",(0,r.jsx)(t.p,{children:"Events represent facts that have happened - they should be named in past tense.\nEach event is defined with a Zod schema for type safety and runtime validation."}),"\n",(0,r.jsx)(t.h6,{id:"type-parameters-1",children:"Type Parameters"}),"\n",(0,r.jsx)(t.h6,{id:"tevents",children:"TEvents"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"TEvents"})," ",(0,r.jsx)(t.em,{children:"extends"})," ",(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/Schemas",children:(0,r.jsx)(t.code,{children:"Schemas"})})]}),"\n",(0,r.jsx)(t.p,{children:"Event schemas type"}),"\n",(0,r.jsx)(t.h6,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsx)(t.h6,{id:"events",children:"events"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"/act-root/docs/api/act/src/type-aliases/ZodTypes",children:(0,r.jsx)(t.code,{children:"ZodTypes"})}),"<",(0,r.jsx)(t.code,{children:"TEvents"}),">"]}),"\n",(0,r.jsx)(t.p,{children:"Object mapping event names to Zod schemas"}),"\n",(0,r.jsx)(t.h6,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsxs)(t.p,{children:["An ActionBuilder (with optional ",(0,r.jsx)(t.code,{children:".patch()"})," to override specific reducers)"]}),"\n",(0,r.jsx)(t.h6,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:".emits({\n  Incremented: z.object({ amount: z.number() }),\n  Decremented: z.object({ amount: z.number() }),\n  Reset: z.object({})\n})\n"})}),"\n",(0,r.jsx)(t.h4,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:".init(() => ({ count: 0, created: new Date() }))\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:".init((data) => ({ ...data, createdAt: new Date() }))\n"})})]})}function h(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},3230(e,t,s){s.d(t,{R:()=>a,x:()=>c});var n=s(1299);let r={},i=n.createContext(r);function a(e){let t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);