# Progress Log

This file tracks AI-assisted development progress.
Each entry documents: date, feature, decisions, files changed, tests, and concerns.

---

[2026-02-08] #371 chore: replace custom semrel actions with standard semantic-release
- Files: .github/workflows/ci-cd.yml, .github/workflows/deploy-docs.yml, .github/workflows/renovate.yml, libs/act/.releaserc.json, libs/act-pg/.releaserc.json, package.json, pnpm-lock.yaml
- Changes: Replaced rotorsoft/semrel-analyze and rotorsoft/semrel-release with semantic-release + official plugins. Updated all GitHub Actions to latest major versions. Added per-library .releaserc.json configs with semantic-release-monorepo for commit filtering.
- Decisions: Used @semantic-release/exec with pnpm publish (instead of @semantic-release/npm publish) to resolve workspace:* protocol in act-pg dependencies. Preserved existing tag format (@rotorsoft/<lib>-v${version}) via explicit tagFormat. Added git pull --rebase step in CD job so second matrix lib picks up commits from first.
- Issues: Dry-run on feature branch recommended before merging to master. Verify NPM_TOKEN and GITHUB_TOKEN secrets are configured.

[2026-02-08] #371 docs: improve published library README files
- Files: libs/act/README.md, libs/act-pg/README.md
- Changes: Added npm downloads, build status, coverage, and license badges to both library READMEs. Added installation, quick start, and related links sections to act README while preserving all existing documentation. Rewrote act-pg README with full usage docs, configuration table, feature list, and database schema reference.

[2026-02-09] #374 feat(act): add slice() builder for vertical feature slices
- Files: libs/act/src/slice-builder.ts (NEW), libs/act/src/act-builder.ts, libs/act/src/act.ts, libs/act/src/types/action.ts, libs/act/src/types/reaction.ts, libs/act/src/index.ts, libs/act/test/slice-builder.spec.ts (NEW), libs/act/test/digit-board.ts, libs/act-pg/test/app.ts, packages/wolfdesk/src/bootstrap.ts, packages/wolfdesk/src/tickets.ts, packages/calculator/src/main.ts, performance/act-performance/src/mem-projector.ts, performance/act-performance/src/pg-projector.ts
- Changes: Implemented slice() builder enabling vertical feature slices that extend existing states with new events, patches, actions, invariants, and reactions. Added App interface to types/action.ts for typing app references in reaction contexts. Changed ReactionHandler signature from positional (event, stream) to context object ({ event, stream, app }) â€” BREAKING CHANGE. Changed ActBuilder.states from Set<string> to Map<string, State> with mutable copies for slice extensibility. Overloaded .with() to accept both State and Slice with namespace conflict detection. Added isSlice() type guard and diagram() mermaid output. Updated all reaction handlers across the codebase (wolfdesk, calculator, performance, tests).
- Decisions: Type erasure at slice boundaries (slices use Schema/Schemas generics). Auto-registration of base states when composing slices. Invariants accumulate across slices (concatenated). Conflict detection for duplicate events, actions, and patches. App interface uses `any` for load() to avoid contravariance issues.
- Tests: 15 new tests in slice-builder.spec.ts covering: isSlice guard, empty/full slice building, invariants, composition with base state, auto-registration, multiple slices, reactions, conflict detection (duplicate events/actions/unknown events), and mermaid diagram generation. All 128 core tests pass.
- Issues: Breaking change to ReactionHandler signature requires updating all existing reaction handlers.
