<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-api/act/src/type-aliases/ActBuilder" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>ActBuilder | Act</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://rotorsoft.github.io/act-root/img/logo.svg /><meta data-rh=true name=twitter:image content=https://rotorsoft.github.io/act-root/img/logo.svg /><meta data-rh=true property=og:url content=https://rotorsoft.github.io/act-root/docs/api/act/src/type-aliases/ActBuilder /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="ActBuilder | Act"/><meta data-rh=true name=description content=@rotorsoft/act-root /><meta data-rh=true property=og:description content=@rotorsoft/act-root /><link data-rh=true rel=icon href=/act-root/img/favicon.ico /><link data-rh=true rel=canonical href=https://rotorsoft.github.io/act-root/docs/api/act/src/type-aliases/ActBuilder /><link data-rh=true rel=alternate href=https://rotorsoft.github.io/act-root/docs/api/act/src/type-aliases/ActBuilder hreflang=en /><link data-rh=true rel=alternate href=https://rotorsoft.github.io/act-root/docs/api/act/src/type-aliases/ActBuilder hreflang=x-default /><link rel=stylesheet href=/act-root/assets/css/styles.47e85758.css /><script src=/act-root/assets/js/runtime~main.71138e11.js defer></script><script src=/act-root/assets/js/main.6f566303.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/act-root/img/logo.svg /><div role=region aria-label="Skip to main content"><a class=skipToContent_IGe2 href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a href=https://rotorsoft.github.io/act-root/ target=_blank rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/act-root/img/logo.svg alt="Act Logo" class="themedComponent_dy_n themedComponent--light_IKlR"/><img src=/act-root/img/logo.svg alt="Act Logo" class="themedComponent_dy_n themedComponent--dark_bE6m"/></div><b class="navbar__title text--truncate">Act</b></a><a class="navbar__item navbar__link" href=/act-root/docs/intro>Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/rotorsoft/act-root target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_MhfM><use href=#theme-svg-external-link /></svg></a><div class="toggle_hhZq colorModeToggle_t2Dn"><button class="clean-btn toggleButton_fL8j toggleButtonDisabled_bCFd" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_WF31 lightToggleIcon_cNCI"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_WF31 darkToggleIcon_dDpO"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_WF31 systemToggleIcon_sgL1"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_R8ij></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_N0j4"><div class=docsWrapper_mucu><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_IRkC" type=button></button><div class=docRoot_MWbz><main class="docMainContainer_sel8 docMainContainerEnhanced_Nbu_"><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_ajUC"><div class=docItemContainer_al34><article><div class="tocCollapsible_MI3S theme-doc-toc-mobile tocMobile_p37T"><button type=button class="clean-btn tocCollapsibleButton_Lgr_">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ActBuilder</h1></header><p><a class="" href=/act-root/docs/api/><strong>@rotorsoft/act-root</strong></a></p>
<hr/>
<p><a class="" href=/act-root/docs/api/>@rotorsoft/act-root</a> / <a class="" href=/act-root/docs/api/act/src/>act/src</a> / ActBuilder</p>
<h1>Type Alias: ActBuilder&lt;S, E, A></h1>
<blockquote>
<p><strong>ActBuilder</strong>&lt;<code>S</code>, <code>E</code>, <code>A</code>> = <code>object</code></p>
</blockquote>
<p>Defined in: <a href=https://github.com/Rotorsoft/act-root/blob/87d39e845eb13dd1a8265c8632479ece76b41905/libs/act/src/act-builder.ts#L44 target=_blank rel="noopener noreferrer" class="">libs/act/src/act-builder.ts:44</a></p>
<p>Fluent builder interface for composing event-sourced applications.</p>
<p>Provides a chainable API for:</p>
<ul>
<li class="">Registering states via <code>.with()</code></li>
<li class="">Defining event reactions via <code>.on()</code> → <code>.do()</code> → <code>.to()</code> or <code>.void()</code></li>
<li class="">Building the orchestrator via <code>.build()</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_YSRs" id=see>See<a href=#see class=hash-link aria-label="Direct link to See" title="Direct link to See" translate=no>​</a></h2>
<ul>
<li class=""><a class="" href=/act-root/docs/api/act/src/functions/act>act</a> for usage examples</li>
<li class=""><a class="" href=/act-root/docs/api/act/src/classes/Act>Act</a> for the built orchestrator API</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_YSRs" id=type-parameters>Type Parameters<a href=#type-parameters class=hash-link aria-label="Direct link to Type Parameters" title="Direct link to Type Parameters" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=s>S<a href=#s class=hash-link aria-label="Direct link to S" title="Direct link to S" translate=no>​</a></h3>
<p><code>S</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/SchemaRegister><code>SchemaRegister</code></a>&lt;<code>A</code>></p>
<p>Schema register for states (maps action names to state schemas)</p>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=e>E<a href=#e class=hash-link aria-label="Direct link to E" title="Direct link to E" translate=no>​</a></h3>
<p><code>E</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/Schemas><code>Schemas</code></a></p>
<p>Event schemas (maps event names to event data schemas)</p>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=a>A<a href=#a class=hash-link aria-label="Direct link to A" title="Direct link to A" translate=no>​</a></h3>
<p><code>A</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/Schemas><code>Schemas</code></a></p>
<p>Action schemas (maps action names to action payload schemas)</p>
<h2 class="anchor anchorTargetStickyNavbar_YSRs" id=properties>Properties<a href=#properties class=hash-link aria-label="Direct link to Properties" title="Direct link to Properties" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=build>build()<a href=#build class=hash-link aria-label="Direct link to build()" title="Direct link to build()" translate=no>​</a></h3>
<blockquote>
<p><strong>build</strong>: (<code>drainLimit?</code>) => <a class="" href=/act-root/docs/api/act/src/classes/Act><code>Act</code></a>&lt;<code>S</code>, <code>E</code>, <code>A</code>></p>
</blockquote>
<p>Defined in: <a href=https://github.com/Rotorsoft/act-root/blob/87d39e845eb13dd1a8265c8632479ece76b41905/libs/act/src/act-builder.ts#L241 target=_blank rel="noopener noreferrer" class="">libs/act/src/act-builder.ts:241</a></p>
<p>Builds and returns the Act orchestrator instance.</p>
<p>This finalizes the builder configuration and creates the orchestrator that
can execute actions, load state, and process reactions.</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=parameters>Parameters<a href=#parameters class=hash-link aria-label="Direct link to Parameters" title="Direct link to Parameters" translate=no>​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=drainlimit>drainLimit?<a href=#drainlimit class=hash-link aria-label="Direct link to drainLimit?" title="Direct link to drainLimit?" translate=no>​</a></h5>
<p><code>number</code></p>
<p>Deprecated parameter, no longer used</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=returns>Returns<a href=#returns class=hash-link aria-label="Direct link to Returns" title="Direct link to Returns" translate=no>​</a></h4>
<p><a class="" href=/act-root/docs/api/act/src/classes/Act><code>Act</code></a>&lt;<code>S</code>, <code>E</code>, <code>A</code>></p>
<p>The Act orchestrator instance</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=example>Example<a href=#example class=hash-link aria-label="Direct link to Example" title="Direct link to Example" translate=no>​</a></h4>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>act</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Counter</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">User</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"UserCreated"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sendWelcomeEmail</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>void</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>build</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>// Now use the app</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"createUser"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> target</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> payload</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> app</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>drain</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=see-1>See<a href=#see-1 class=hash-link aria-label="Direct link to See" title="Direct link to See" translate=no>​</a></h4>
<p><a class="" href=/act-root/docs/api/act/src/classes/Act>Act</a> for available orchestrator methods</p>
<hr/>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=events>events<a href=#events class=hash-link aria-label="Direct link to events" title="Direct link to events" translate=no>​</a></h3>
<blockquote>
<p><code>readonly</code> <strong>events</strong>: <a class="" href=/act-root/docs/api/act/src/type-aliases/EventRegister><code>EventRegister</code></a>&lt;<code>E</code>></p>
</blockquote>
<p>Defined in: <a href=https://github.com/Rotorsoft/act-root/blob/87d39e845eb13dd1a8265c8632479ece76b41905/libs/act/src/act-builder.ts#L248 target=_blank rel="noopener noreferrer" class="">libs/act/src/act-builder.ts:248</a></p>
<p>The registered event schemas and their reaction maps.</p>
<p>This is an internal registry maintained by the builder. Generally, you don't
need to access this directly.</p>
<hr/>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=on>on()<a href=#on class=hash-link aria-label="Direct link to on()" title="Direct link to on()" translate=no>​</a></h3>
<blockquote>
<p><strong>on</strong>: &lt;<code>K</code>>(<code>event</code>) => <code>object</code></p>
</blockquote>
<p>Defined in: <a href=https://github.com/Rotorsoft/act-root/blob/87d39e845eb13dd1a8265c8632479ece76b41905/libs/act/src/act-builder.ts#L106 target=_blank rel="noopener noreferrer" class="">libs/act/src/act-builder.ts:106</a></p>
<p>Begins defining a reaction to a specific event.</p>
<p>Reactions are event handlers that respond to state changes. They can trigger
additional actions, update external systems, or perform side effects. Reactions
are processed asynchronously during drain cycles.</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=type-parameters-1>Type Parameters<a href=#type-parameters-1 class=hash-link aria-label="Direct link to Type Parameters" title="Direct link to Type Parameters" translate=no>​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=k>K<a href=#k class=hash-link aria-label="Direct link to K" title="Direct link to K" translate=no>​</a></h5>
<p><code>K</code> <em>extends</em> keyof <code>E</code></p>
<p>Event name (must be a registered event)</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=parameters-1>Parameters<a href=#parameters-1 class=hash-link aria-label="Direct link to Parameters" title="Direct link to Parameters" translate=no>​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=event>event<a href=#event class=hash-link aria-label="Direct link to event" title="Direct link to event" translate=no>​</a></h5>
<p><code>K</code></p>
<p>The event name to react to</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=returns-1>Returns<a href=#returns-1 class=hash-link aria-label="Direct link to Returns" title="Direct link to Returns" translate=no>​</a></h4>
<p>An object with <code>.do()</code> method to define the reaction handler</p>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=do>do()<a href=#do class=hash-link aria-label="Direct link to do()" title="Direct link to do()" translate=no>​</a></h5>
<blockquote>
<p><strong>do</strong>: (<code>handler</code>, <code>options?</code>) => <code>ActBuilder</code>&lt;<code>S</code>, <code>E</code>, <code>A</code>> & <code>object</code></p>
</blockquote>
<p>Defines the reaction handler function for the event.</p>
<p>The handler receives the committed event and can:</p>
<ul>
<li class="">Perform side effects (send emails, call APIs, etc.)</li>
<li class="">Return an action tuple <code>[actionName, payload]</code> to trigger another action</li>
<li class="">Return <code>void</code> or <code>undefined</code> for side-effect-only reactions</li>
</ul>
<h6 class="anchor anchorTargetStickyNavbar_YSRs" id=parameters-2>Parameters<a href=#parameters-2 class=hash-link aria-label="Direct link to Parameters" title="Direct link to Parameters" translate=no>​</a></h6>
<h6 class="anchor anchorTargetStickyNavbar_YSRs" id=handler>handler<a href=#handler class=hash-link aria-label="Direct link to handler" title="Direct link to handler" translate=no>​</a></h6>
<p><a class="" href=/act-root/docs/api/act/src/type-aliases/ReactionHandler><code>ReactionHandler</code></a>&lt;<code>E</code>, <code>K</code>></p>
<p>The reaction handler function</p>
<h6 class="anchor anchorTargetStickyNavbar_YSRs" id=options>options?<a href=#options class=hash-link aria-label="Direct link to options?" title="Direct link to options?" translate=no>​</a></h6>
<p><code>Partial</code>&lt;<a class="" href=/act-root/docs/api/act/src/type-aliases/ReactionOptions><code>ReactionOptions</code></a>></p>
<p>Optional reaction configuration</p>
<h6 class="anchor anchorTargetStickyNavbar_YSRs" id=returns-2>Returns<a href=#returns-2 class=hash-link aria-label="Direct link to Returns" title="Direct link to Returns" translate=no>​</a></h6>
<p>The builder with <code>.to()</code> and <code>.void()</code> methods for routing configuration</p>
<h6 class="anchor anchorTargetStickyNavbar_YSRs" id=examples>Examples<a href=#examples class=hash-link aria-label="Direct link to Examples" title="Direct link to Examples" translate=no>​</a></h6>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"UserCreated"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> analytics</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>track</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"user_created"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>void</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"OrderPlaced"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>"reduceStock"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> amount</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">items</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">length </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>to</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"inventory-1"</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"PaymentProcessed"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> externalAPI</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>notify</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    blockOnError</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// Don't block on failure</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    maxRetries</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token plain">         </span><span class="token comment" style=color:#999988;font-style:italic>// Retry up to 5 times</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>void</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=example-1>Example<a href=#example-1 class=hash-link aria-label="Direct link to Example" title="Direct link to Example" translate=no>​</a></h4>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>act</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">User</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>on</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"UserCreated"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// React to UserCreated events</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>do</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>sendWelcomeEmail</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">email</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>void</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>build</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<hr/>
<h3 class="anchor anchorTargetStickyNavbar_YSRs" id=with>with()<a href=#with class=hash-link aria-label="Direct link to with()" title="Direct link to with()" translate=no>​</a></h3>
<blockquote>
<p><strong>with</strong>: &lt;<code>SX</code>, <code>EX</code>, <code>AX</code>>(<code>state</code>) => <code>ActBuilder</code>&lt;<code>S</code> & <code>{ [K in keyof AX]: SX }</code>, <code>E</code> & <code>EX</code>, <code>A</code> & <code>AX</code>></p>
</blockquote>
<p>Defined in: <a href=https://github.com/Rotorsoft/act-root/blob/87d39e845eb13dd1a8265c8632479ece76b41905/libs/act/src/act-builder.ts#L80 target=_blank rel="noopener noreferrer" class="">libs/act/src/act-builder.ts:80</a></p>
<p>Registers a state definition with the builder.</p>
<p>States define aggregates that process actions and emit events. Each state
registration adds its actions and events to the orchestrator's registry.
State names, action names, and event names must be unique across the application.</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=type-parameters-2>Type Parameters<a href=#type-parameters-2 class=hash-link aria-label="Direct link to Type Parameters" title="Direct link to Type Parameters" translate=no>​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=sx>SX<a href=#sx class=hash-link aria-label="Direct link to SX" title="Direct link to SX" translate=no>​</a></h5>
<p><code>SX</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/Schema><code>Schema</code></a></p>
<p>State schema type</p>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=ex>EX<a href=#ex class=hash-link aria-label="Direct link to EX" title="Direct link to EX" translate=no>​</a></h5>
<p><code>EX</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/Schemas><code>Schemas</code></a></p>
<p>Event schemas type for this state</p>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=ax>AX<a href=#ax class=hash-link aria-label="Direct link to AX" title="Direct link to AX" translate=no>​</a></h5>
<p><code>AX</code> <em>extends</em> <a class="" href=/act-root/docs/api/act/src/type-aliases/Schemas><code>Schemas</code></a></p>
<p>Action schemas type for this state</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=parameters-3>Parameters<a href=#parameters-3 class=hash-link aria-label="Direct link to Parameters" title="Direct link to Parameters" translate=no>​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_YSRs" id=state>state<a href=#state class=hash-link aria-label="Direct link to state" title="Direct link to state" translate=no>​</a></h5>
<p><a class="" href=/act-root/docs/api/act/src/type-aliases/State><code>State</code></a>&lt;<code>SX</code>, <code>EX</code>, <code>AX</code>></p>
<p>The state definition to register</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=returns-3>Returns<a href=#returns-3 class=hash-link aria-label="Direct link to Returns" title="Direct link to Returns" translate=no>​</a></h4>
<p><code>ActBuilder</code>&lt;<code>S</code> & <code>{ [K in keyof AX]: SX }</code>, <code>E</code> & <code>EX</code>, <code>A</code> & <code>AX</code>></p>
<p>The builder with updated type information for chaining</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=throws>Throws<a href=#throws class=hash-link aria-label="Direct link to Throws" title="Direct link to Throws" translate=no>​</a></h4>
<p>If a state with duplicate action or event names is registered</p>
<h4 class="anchor anchorTargetStickyNavbar_YSRs" id=examples-1>Examples<a href=#examples-1 class=hash-link aria-label="Direct link to Examples" title="Direct link to Examples" translate=no>​</a></h4>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>act</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Counter</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>build</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div>
<div class="language-typescript codeBlockContainer_Zkl8 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_KQtW><pre tabindex=0 class="prism-code language-typescript codeBlock_ETnk thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_PZex><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> app </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>act</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">User</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Order</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>with</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Inventory</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>build</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_Qf8s"><a href=https://github.com/rotorsoft/act-root/edit/master/docs/docs/api/act/src/type-aliases/ActBuilder.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_MVyC aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_lP5j"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_S8Dn thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#see class="table-of-contents__link toc-highlight">See</a><li><a href=#type-parameters class="table-of-contents__link toc-highlight">Type Parameters</a><ul><li><a href=#s class="table-of-contents__link toc-highlight">S</a><li><a href=#e class="table-of-contents__link toc-highlight">E</a><li><a href=#a class="table-of-contents__link toc-highlight">A</a></ul><li><a href=#properties class="table-of-contents__link toc-highlight">Properties</a><ul><li><a href=#build class="table-of-contents__link toc-highlight">build()</a><li><a href=#events class="table-of-contents__link toc-highlight">events</a><li><a href=#on class="table-of-contents__link toc-highlight">on()</a><li><a href=#with class="table-of-contents__link toc-highlight">with()</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/act-root/docs/intro>Introduction</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/rotorsoft/act-root target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_MhfM><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 Rotorsoft. Built with Docusaurus.</div></div></div></footer></div></body>